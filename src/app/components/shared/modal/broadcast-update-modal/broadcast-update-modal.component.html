
<form  #f="ngForm" (ngSubmit)="OnSubmitScreenForm(f)" novalidate>
  <div class="fixed inset-0 bg-gray-500 bg-opacity-25 transition-opacity" aria-hidden="true"></div>

  <!-- This element is to trick the browser into centering the modal contents. -->
  <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>


  <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:w-full max-w-3xl">
    <div class="modal-header">
      <h4 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Ajouter un Écran</h4>
    </div>

    <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
      <div class=" grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
        <!-- col + input spécific email de tailwind  -->
        <div class="sm:col-span-3">
          <label for="first_name" class="block text-sm font-medium text-gray-700" >
            Nom
          </label>
          <div class="mt-1">
            <input required [(ngModel)]="broadcast.Name"  type="text" #Name="ngModel" name="Name" id="Name" placeholder="Nom" autocomplete="given-name"
            class="{{f.submitted && Name.invalid ? TypeBasicCss.INPUT_INVALID :TypeBasicCss.INPUT_DEFAULT}}" >
          </div>

        </div>
        <!-- col pour le role, avec un select  -->
        <div class="sm:col-span-3">
          <label for="first_name" class="block text-sm font-medium text-gray-700">
            État
          </label>
          <div class="mt-1">
            <select required #State="ngModel" [(ngModel)]="broadcast.State" id="State" name="State"
            class="{{f.submitted && State.invalid ? TypeBasicCss.INPUT_INVALID :TypeBasicCss.INPUT_DEFAULT}}">
              <option  value="" disabled selected>Choisir un état</option>
              <option class="text-gray-700" value="{{TypeStateBroadcast.LIVE}}">{{TypeStateBroadcast.LIVE}}</option>
              <option class="text-gray-700" value="{{TypeStateBroadcast.STOPPED}}">{{TypeStateBroadcast.STOPPED}}</option>
            </select>
          </div>
        </div>
    </div>
    <div class="mt-5 mb-5 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
      <div class="sm:col-span-3">
        <label for="first_name" class="block text-sm font-medium text-gray-700" >
          Date de début de diffusion
        </label>
        <div class="mt-1">
          <input required [(ngModel)]="broadcast.DateStart" type="date" #DateStart="ngModel" name="DateStart" id="DateStart" placeholder="Nom" autocomplete="given-name"
          class="{{f.submitted && DateStart.invalid ? TypeBasicCss.INPUT_INVALID :TypeBasicCss.INPUT_DEFAULT}}" >
        </div>
      </div>
      <div class="sm:col-span-3">
        <label for="first_name" class="block text-sm font-medium text-gray-700" >
          Date de fin de diffusion
        </label>
        <div class="mt-1">
          <input required [(ngModel)]="broadcast.DateEnd"  type="date" #DateEnd="ngModel" name="DateEnd" id="DateEnd" placeholder="Nom" autocomplete="given-name"
          class="{{f.submitted && DateEnd.invalid ? TypeBasicCss.INPUT_INVALID :TypeBasicCss.INPUT_DEFAULT}}" >
        </div>

      </div>

  </div>

  <div class="mt-5 mb-5 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
    <div class="sm:col-span-3">
      <label for="first_name" class="block text-sm font-medium text-gray-700" >
        Choisir des groupes d'écrans
      </label>
      <div class="mt-1">
        <select required #GroupScreens="ngModel" (change)="pushGroupScreenToArray($event)" [(ngModel)]="selectGroupScreenValue" id="GroupScreens" name="GroupScreens"
            class="{{f.submitted && GroupScreens.invalid ? TypeBasicCss.INPUT_INVALID :TypeBasicCss.INPUT_DEFAULT}}">
              <option  value="" disabled selected>Choisir un groupe d'écran</option>
              <option class="text-gray-700" value="Groupe écran n°1">Groupe écran n°1</option>
              <option class="text-gray-700" value="Groupe écran n°2">Groupe écran n°2</option>
            </select>
      </div>
      <div *ngIf="broadcast.GroupScreens.length >0" class="mt-5">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Nom écran
            </th>
            <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
              Actions
            </th>
          </tr>
          </thead>
          <tbody>
            <!-- Odd row -->
            <tr [ngClass]="i%2 == 0 ? 'bg-white' : 'bg-gray-100'" *ngFor="let item of broadcast.GroupScreens; let i = index">
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                {{item}}
              </td>
              <td class="px-6 py-4 whitespace-nowrap justify-center flex text-sm text-gray-500">
                <svg (click)="removeGroupScreenItem(item)" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-indigo-500 cursor-pointer hover:rotate-90 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
               </td>
              </tr>
              </tbody>
          </table>
      </div>
    </div>
    <div class="sm:col-span-3">
      <label for="first_name" class="block text-sm font-medium text-gray-700" >
        Choisir des écrans
      </label>
      <div class="mt-1">
        <select required #Screen="ngModel" (change)="pushScreenToArray($event)" [(ngModel)]="selectScreenValue" id="Screen" name="Screen"
            class="{{f.submitted && Screen.invalid ? TypeBasicCss.INPUT_INVALID :TypeBasicCss.INPUT_DEFAULT}}">
              <option  value="" disabled selected>Choisir un écran</option>
              <option class="text-gray-700" value="Écran n°1">Écran n°1</option>
              <option class="text-gray-700" value="Écran n°2">Écran n°2</option>
            </select>
      </div>
      <div *ngIf="broadcast.Screens.length >0" class="mt-5">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Nom écran
            </th>
            <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
              Actions
            </th>
          </tr>
          </thead>
          <tbody>
            <!-- Odd row -->
            <tr [ngClass]="i%2 == 0 ? 'bg-white' : 'bg-gray-100'" *ngFor="let item of broadcast.Screens; let i = index">
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                {{item}}
              </td>
              <td class="px-6 py-4 whitespace-nowrap justify-center flex text-sm text-gray-500">
                <svg (click)="removeScreenItem(item)" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-indigo-500 cursor-pointer hover:rotate-90 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
               </td>
              </tr>
              </tbody>
          </table>
      </div>
    </div>

</div>
<div class="mt-5 mb-5 broadcast-planification">
<div class="broadcast-planification-left">
  <div class="item-grid-day" *ngFor="let item of arrOfDay ">
    {{item}}
  </div>
</div>
  <div class="broadcast-planification-right ">
    <div class="flex w-full justify-center items-center">
      <div class=" item-grid-hour" *ngFor="let item of arrOfHour">{{item}}</div>
    </div>

    <div class="item-grid-container">
      <div class="item-grid">
        <div class="item-grid-row" *ngFor="let row of grid;let y = index">
          <!-- (mousedown)="onPlanificationMouseDown()" (mouseup)="onPlanificationMouseUp()"  (mouseover)="onPlanificationMouseOver(y,x)" -->
          <div class="item-grid-cell"  (click)="onPlanificationMouseClick(y,x)"
               *ngFor="let cell of row;let x = index"
               [ngClass]="{
          'active':isGridCellActive(y,x),
          'fulled': getProcessigIndexByCellPosition(y,x) !== -1}"
                >
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

    </div>
    <div class="bg-gray-100 px-4 py-3 flex justify-between">

      <button (click)="close()" type="button" class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
        Annuler
      </button>
      <button  type="submit" class="w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2  bg-indigo-600 hover:bg-indigo-700
      text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm">
        Valider
      </button>

    </div>
  </div>

  </form>
